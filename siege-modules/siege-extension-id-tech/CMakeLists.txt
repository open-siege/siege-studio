cmake_minimum_required(VERSION 3.28)
project(siege-extension-id-tech)

if (WIN32)
    add_library(siege-extension-return-to-castle-wolf-sp SHARED src/id-tech-shared.cpp src/wolf-sp.cpp src/cmd-id-tech-3-0.cpp src/id-tech-3.def)    
    add_library(siege-extension-call-of-duty-2-sp SHARED src/id-tech-shared.cpp src/call-of-duty-2-sp.cpp src/iw.def)
    add_library(siege-extension-call-of-duty-4-sp SHARED src/id-tech-shared.cpp src/call-of-duty-4-sp.cpp src/iw.def)
    add_library(siege-extension-elite-force-sp SHARED src/id-tech-shared.cpp src/elite-force-sp.cpp src/cmd-id-tech-3-0.cpp src/id-tech-3.def)
    add_library(siege-extension-elite-force-2 SHARED src/id-tech-shared.cpp src/elite-force-2.cpp src/cmd-id-tech-3-0.cpp  src/id-tech-3.def)
    add_library(siege-extension-jedi-outcast-sp SHARED src/id-tech-shared.cpp src/jedi-outcast-sp.cpp src/cmd-id-tech-3-0.cpp src/id-tech-3.def)
    add_library(siege-extension-jedi-academy-sp SHARED src/id-tech-shared.cpp src/jedi-academy-sp.cpp src/cmd-id-tech-3-0.cpp src/id-tech-3.def)
    add_library(siege-extension-soldier-of-fortune-2-sp SHARED src/id-tech-shared.cpp src/sof-2-sp.cpp src/cmd-id-tech-3-0.cpp src/id-tech-3.def)
    add_library(siege-extension-call-of-duty-sp SHARED src/id-tech-shared.cpp src/call-of-duty-sp.cpp src/cmd-id-tech-3-0.cpp src/id-tech-3.def)
    add_library(siege-extension-call-of-duty-uo-sp SHARED src/id-tech-shared.cpp src/call-of-duty-uo-sp.cpp src/cmd-id-tech-3-0.cpp src/id-tech-3.def)
    add_library(siege-extension-anachronox SHARED src/id-tech-shared.cpp src/anox.cpp src/cmd-id-tech-2-5.cpp src/id-tech-2.5.def)

    # with multiplayer
    add_library(siege-extension-jedi-outcast-mp SHARED src/id-tech-shared.cpp src/jedi-outcast-mp.cpp src/cmd-id-tech-3-0.cpp src/id-tech-3.def)
    add_library(siege-extension-jedi-academy-mp SHARED src/id-tech-shared.cpp src/jedi-academy-mp.cpp src/cmd-id-tech-3-0.cpp src/id-tech-3.def)
    add_library(siege-extension-soldier-of-fortune SHARED src/id-tech-shared.cpp src/sof.cpp src/cmd-id-tech-2-5.cpp src/id-tech-2.5.def)
    add_library(siege-extension-soldier-of-fortune-2-mp SHARED src/id-tech-shared.cpp src/sof-2-mp.cpp src/cmd-id-tech-3-0.cpp src/id-tech-3.def)
    add_library(siege-extension-sin SHARED src/id-tech-shared.cpp src/sin.cpp src/cmd-id-tech-2-5.cpp src/id-tech-2.5.def)

    add_library(siege-extension-quake SHARED src/id-tech-shared.cpp src/quake.cpp src/id-tech-2.def)
    add_library(siege-extension-hexen-2 SHARED src/id-tech-shared.cpp src/hexen-2.cpp src/id-tech-2.def)
    add_library(siege-extension-battle-metal SHARED src/id-tech-shared.cpp src/battle-metal.cpp src/id-tech-2.def)
    add_library(siege-extension-quake-2 SHARED src/quake-2.cpp src/id-tech-shared.cpp src/cmd-id-tech-2-5.cpp src/id-tech-2.5.def)
    add_library(siege-extension-daikatana SHARED src/id-tech-shared.cpp src/daikatana.cpp src/cmd-id-tech-2-5.cpp src/id-tech-2.5.def)
    add_library(siege-extension-kingpin SHARED src/id-tech-shared.cpp src/kingpin.cpp src/cmd-id-tech-2-5.cpp src/id-tech-2.5.def)
    add_library(siege-extension-quake-3 SHARED src/id-tech-shared.cpp src/quake-3.cpp src/cmd-id-tech-3-0.cpp src/id-tech-3.def)
    add_library(siege-extension-return-to-castle-wolf-mp SHARED src/id-tech-shared.cpp src/cmd-id-tech-3-0.cpp src/wolf-mp.cpp src/id-tech-3.def)
    add_library(siege-extension-elite-force-mp SHARED src/id-tech-shared.cpp src/cmd-id-tech-3-0.cpp src/elite-force-mp.cpp src/id-tech-3.def)
    add_library(siege-extension-call-of-duty-mp SHARED src/id-tech-shared.cpp src/cmd-id-tech-3-0.cpp src/call-of-duty-mp.cpp src/id-tech-3.def)
    add_library(siege-extension-call-of-duty-uo-mp SHARED src/id-tech-shared.cpp src/cmd-id-tech-3-0.cpp src/call-of-duty-uo-mp.cpp src/id-tech-3.def)
    add_library(siege-extension-call-of-duty-2-mp SHARED src/id-tech-shared.cpp src/cmd-id-tech-3-0.cpp src/call-of-duty-2-mp.cpp src/iw.def)
    add_library(siege-extension-call-of-duty-4-mp SHARED src/id-tech-shared.cpp src/call-of-duty-4-mp.cpp src/iw.def)
    add_library(siege-extension-allied-assault SHARED src/id-tech-shared.cpp src/cmd-id-tech-3-0.cpp src/allied-assault.cpp src/id-tech-3.def)
    add_library(siege-extension-allied-assault-breakthrough SHARED src/id-tech-shared.cpp src/cmd-id-tech-3-0.cpp src/allied-assault-breakthrough.cpp src/id-tech-3.def)
    add_library(siege-extension-allied-assault-spearhead SHARED src/id-tech-shared.cpp src/cmd-id-tech-3-0.cpp src/allied-assault-spearhead.cpp src/id-tech-3.def)
    add_library(siege-extension-space-trader SHARED src/id-tech-shared.cpp src/space-trader.cpp src/cmd-id-tech-3-0.cpp src/id-tech-3.def)
    add_library(siege-extension-take-no-prisoners SHARED src/id-tech-shared.cpp src/take-no-prisoners.cpp src/vampire.def)



    get_property(ID_TECH_TARGETS
                DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} PROPERTY BUILDSYSTEM_TARGETS)

    foreach(EXT_TARGET IN ITEMS ${ID_TECH_TARGETS})
        set_target_properties(${EXT_TARGET} PROPERTIES CXX_STANDARD 23)
        target_link_libraries(${EXT_TARGET} PRIVATE siege-extension siege-configuration siege-resource)
    endforeach()
endif()
